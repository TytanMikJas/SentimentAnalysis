schema: '2.0'
stages:
  process_data:
    cmd: python scripts/process_data.py data/raw_data data/processed_data/dataset.pkl
    deps:
    - path: data/raw_data
      hash: md5
      md5: 1879a37ccfe89870a8e73238e331f4ac.dir
      size: 524018363
      nfiles: 6
    - path: scripts/process_data.py
      hash: md5
      md5: 1401ece579631c4e35dea6e31c6ed52c
      size: 1953
      isexec: true
    params:
      params.yaml:
        process_data.cols_to_delete:
        - product_id
        - brand_id
        - variation_type
        - variation_value
        - variation_desc
        - author_id
        - submission_time
        - skin_tone
        - eye_color
        - skin_type
        - hair_color
        - product_id
        - 'Unnamed: 0'
        process_data.cols_to_fix:
        - total_feedback_count
        - total_pos_feedback_count
        process_data.review_text_column: review_text
    outs:
    - path: data/processed_data/dataset.pkl
      hash: md5
      md5: ef1694875461e8eac534d92fe25d57b5
      size: 624919680
  split_data:
    cmd: python scripts/split_data.py data/preprocessed_data/preprocessed_dataset.pkl
      data/train_test_data
    deps:
    - path: data/preprocessed_data/preprocessed_dataset.pkl
      hash: md5
      md5: 29589c31bba9f39bab5f774343119099
      size: 415065133
    - path: scripts/split_data.py
      hash: md5
      md5: c735dfadc84760d669341093a005b71d
      size: 1179
      isexec: true
    params:
      params.yaml:
        split_data.label_column: LABEL-rating
        split_data.stratify: true
        split_data.test_size: 0.15
    outs:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
  eval_model:
    cmd: python scripts/eval_model.py data/train_test_data metrics.json
    deps:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
    - path: scripts/eval_model.py
      hash: md5
      md5: 02f54bfad490c26bd8f738f70da165e2
      size: 3642
      isexec: true
    params:
      params.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.dim_red_method: svd
        features.dim_reduction: false
        features.highlights: highlights
        features.n_components: 145
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
        features.text:
        - review_text
        - review_title
    outs:
    - path: metrics.json
      hash: md5
      md5: f37cbb0d69b84e4ffa09498ce0ee257e
      size: 627
  execute_notebook:
    cmd: papermill notebooks/Lab4.ipynb data/notebooks/Lab4.ipynb
    deps:
    - path: data/processed_data/dataset.pkl
      hash: md5
      md5: ef1694875461e8eac534d92fe25d57b5
      size: 624919680
    - path: notebooks/Lab4.ipynb
      hash: md5
      md5: 888aa9c4e8c9f94683cd8673966b6ac5
      size: 17061
      isexec: true
    outs:
    - path: data/notebooks/Lab4.ipynb
      hash: md5
      md5: 458651d6585b98cb9ef671de5d26744c
      size: 736615
  preprocess_data:
    cmd: python scripts/preprocess_data.py data/processed_data/dataset.pkl data/preprocessed_data/preprocessed_dataset.pkl
    deps:
    - path: data/processed_data/dataset.pkl
      hash: md5
      md5: ef1694875461e8eac534d92fe25d57b5
      size: 624919680
    - path: scripts/preprocess_data.py
      hash: md5
      md5: 4e40563cabb572b9542eacc8ac0c1697
      size: 3535
      isexec: true
    params:
      params.yaml:
        preprocess_data.cols_to_delete:
        - value_price_usd
        - sale_price_usd
        - child_max_price
        - child_min_price
        - tertiary_category
        - size
        - ingredients
    outs:
    - path: data/preprocessed_data/preprocessed_dataset.pkl
      hash: md5
      md5: 29589c31bba9f39bab5f774343119099
      size: 415065133
  execute_eda:
    cmd: papermill notebooks/Lab4.ipynb data/notebooks/Lab4.ipynb
    deps:
    - path: data/processed_data/dataset.pkl
      hash: md5
      md5: ef1694875461e8eac534d92fe25d57b5
      size: 624919680
    - path: notebooks/Lab4.ipynb
      hash: md5
      md5: 888aa9c4e8c9f94683cd8673966b6ac5
      size: 17061
      isexec: true
    outs:
    - path: data/notebooks/Lab4.ipynb
      hash: md5
      md5: 4279db515d88eb7a11ecac95cb27b3b7
      size: 736697
  execute_search:
    cmd: papermill notebooks/Lab6.1.ipynb data/notebooks/Lab6.1.ipynb
    deps:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
    - path: notebooks/Lab6.1.ipynb
      hash: md5
      md5: de43391222c633de1acc0237aeab5c5e
      size: 19038
      isexec: true
    outs:
    - path: data/notebooks/Lab6.1.ipynb
      hash: md5
      md5: 10c6781b245fabde6d7d55c783f40512
      size: 208707
  eval_hyperparameters:
    cmd: papermill notebooks/Lab6.1.ipynb data/notebooks/Lab6.1.ipynb
    deps:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
    - path: notebooks/Lab6.1.ipynb
      hash: md5
      md5: aceee9215f6c2faac74e6ca5d9fb9155
      size: 22526
      isexec: true
    params:
      params.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.dim_red_method: svd
        features.dim_reduction: false
        features.highlights: highlights
        features.n_components: 145
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
        features.text:
        - review_text
        - review_title
    outs:
    - path: data/models/best_params.json
      hash: md5
      md5: fbb8edcc5026badec10f5ae276da190d
      size: 314
    - path: data/notebooks/Lab6.1.ipynb
      hash: md5
      md5: d5f251130cb0fd862827d4b406bb2dbb
      size: 221379
  eval_features:
    cmd: python scripts/eval_features.py data/train_test_data metrics.json
    deps:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
    - path: scripts/eval_features.py
      hash: md5
      md5: 1ddcdd646df7482d1643b8d6c76866c5
      size: 4058
      isexec: true
    params:
      params.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.dim_red_method: svd
        features.dim_reduction: false
        features.highlights: highlights
        features.n_components: 145
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
        features.text:
        - review_text
        - review_title
    outs:
    - path: data/models/best_features.json
      hash: md5
      md5: 13356ec67b28ac7815bac1325fe01e78
      size: 25
    - path: metrics.json
      hash: md5
      md5: 70ca075edfac0b980c5c1fbdd192b8ab
      size: 624
  eval_vectorization:
    cmd: python scripts/eval_vectorizations.py data/train_test_data vec_metrics.json
    deps:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
    - path: scripts/eval_vectorizations.py
      hash: md5
      md5: 438df7b9f69fcb73ca498df3801f28b9
      size: 3762
      isexec: true
    params:
      params.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.dim_red_method: svd
        features.dim_reduction: false
        features.highlights: highlights
        features.n_components: 145
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
        features.text:
        - review_text
        - review_title
    outs:
    - path: data/models/best_vec_method.json
      hash: md5
      md5: d458db9b0273b1bc65220c6ad6d4758f
      size: 35
    - path: vec_metrics.json
      hash: md5
      md5: 8172abe254c94391a24a9ee195f55e4b
      size: 228
  test_model:
    cmd: python scripts/test_model.py data/train_test_data test_metrics.json
    deps:
    - path: data/models/best_features.json
      hash: md5
      md5: 13356ec67b28ac7815bac1325fe01e78
      size: 25
    - path: data/models/best_params.json
      hash: md5
      md5: fbb8edcc5026badec10f5ae276da190d
      size: 314
    - path: data/models/best_vec_method.json
      hash: md5
      md5: d458db9b0273b1bc65220c6ad6d4758f
      size: 35
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: 21952518d8cb522cd796c4645a5d1dab
      size: 62388548
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: ed8b0518eb65ab6827a72f49fda10f54
      size: 352826825
    - path: scripts/test_model.py
      hash: md5
      md5: 674788d5862a7a74cf24572977b65ba5
      size: 4717
      isexec: true
    outs:
    - path: data/models/dummy_final_pipeline.pkl
      hash: md5
      md5: 017bb51761fa870f5c90a1e9e1a68b09
      size: 14049
    - path: data/models/random_forest_final_pipeline.pkl
      hash: md5
      md5: 8b12c2f5dc67879dd79671e2e05f3f6a
      size: 78198890
    - path: data/models/svm_final_pipeline.pkl
      hash: md5
      md5: f208696a6df4d586bb8ef93bcb9eab8e
      size: 5890561
    - path: test_metrics.json
      hash: md5
      md5: a8a4e3be1009f3da9ad3059cbb362a75
      size: 561
  process_data@sephora:
    cmd: python scripts/process_data.py data/raw_data/sephora data/processed_data/sephora.pkl
      sephora
    deps:
    - path: data/raw_data/sephora
      hash: md5
      md5: 9803c5a804c3f06eeb4373c37a572ca0.dir
      size: 524018363
      nfiles: 7
    - path: scripts/process_data.py
      hash: md5
      md5: 10a86f1d2d16d4653f74dec4550eacf6
      size: 2818
      isexec: true
    params:
      params.yaml:
        process_data.review_text_column: review_text
      configs/sephora.yaml:
        process_data.cols_to_delete:
        - product_id
        - brand_id
        - variation_type
        - variation_value
        - variation_desc
        - author_id
        - submission_time
        - skin_tone
        - eye_color
        - skin_type
        - hair_color
        - product_id
        - 'Unnamed: 0'
        - value_price_usd
        - sale_price_usd
        - child_max_price
        - child_min_price
        - tertiary_category
        - size
        - ingredients
        process_data.cols_to_fix:
        - total_feedback_count
        - total_pos_feedback_count
    outs:
    - path: data/processed_data/sephora.pkl
      hash: md5
      md5: f0dbbefbaa8e24aa21189f6c7e86887c
      size: 570771311
  process_data@rt-polarity:
    cmd: python scripts/process_data.py data/raw_data/rt-polarity data/processed_data/rt-polarity.pkl
      rt-polarity
    deps:
    - path: data/raw_data/rt-polarity
      hash: md5
      md5: 679f4185d16dab46ec85fe73ed0bb369.dir
      size: 1238458
      nfiles: 3
    - path: scripts/process_data.py
      hash: md5
      md5: 10a86f1d2d16d4653f74dec4550eacf6
      size: 2818
      isexec: true
    params:
      params.yaml:
        process_data.review_text_column: review_text
      configs/rt-polarity.yaml:
        process_data.cols_to_delete: []
        process_data.cols_to_fix: []
    outs:
    - path: data/processed_data/rt-polarity.pkl
      hash: md5
      md5: 4889d490930705bc21eb7afa6dcc2ae6
      size: 1677374
  execute_eda@rt-polarity:
    cmd: "papermill notebooks/eda.ipynb data/notebooks/rt-polarity/eda.ipynb -p dataset
      rt-polarity\n"
    deps:
    - path: data/train_test_data/rt-polarity/train.pkl
      hash: md5
      md5: 0dc18651cce7caea6680b9c234370123
      size: 750192
    - path: notebooks/eda.ipynb
      hash: md5
      md5: 748709fdc303949d24097a485711e048
      size: 11058
      isexec: true
    params:
      configs/rt-polarity.yaml:
        features.categorical:
        - contains_bad
        features.label: label
        features.numerical:
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
    outs:
    - path: data/notebooks/rt-polarity/eda.ipynb
      hash: md5
      md5: 6140f63b77e55eaf6534e37ad5bc7c73
      size: 306391
  execute_eda@sephora:
    cmd: "papermill notebooks/eda.ipynb data/notebooks/sephora/eda.ipynb -p dataset
      sephora\n"
    deps:
    - path: data/train_test_data/sephora/train.pkl
      hash: md5
      md5: a1bbdc9c83e5acecb058991a91e4341a
      size: 35422282
    - path: notebooks/eda.ipynb
      hash: md5
      md5: 748709fdc303949d24097a485711e048
      size: 11058
      isexec: true
    params:
      configs/sephora.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.label: LABEL-rating
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        - review_title
    outs:
    - path: data/notebooks/sephora/eda.ipynb
      hash: md5
      md5: e1f6fd3f145db82da6fe2acf664e8b27
      size: 610993
  preprocess_data@rt-polarity:
    cmd: python scripts/preprocess_data.py data/processed_data/rt-polarity.pkl data/preprocessed_data/preprocessed_rt-polarity.pkl
      rt-polarity
    deps:
    - path: data/processed_data/rt-polarity.pkl
      hash: md5
      md5: 4889d490930705bc21eb7afa6dcc2ae6
      size: 1677374
    - path: scripts/preprocess_data.py
      hash: md5
      md5: be338abd544e77b5d385d17dc38c7736
      size: 3113
      isexec: true
    outs:
    - path: data/preprocessed_data/preprocessed_rt-polarity.pkl
      hash: md5
      md5: dd617f2e0f703af6dc707bc21450cf39
      size: 796517
  preprocess_data@sephora:
    cmd: python scripts/preprocess_data.py data/processed_data/sephora.pkl data/preprocessed_data/preprocessed_sephora.pkl
      sephora
    deps:
    - path: data/processed_data/sephora.pkl
      hash: md5
      md5: f0dbbefbaa8e24aa21189f6c7e86887c
      size: 570771311
    - path: scripts/preprocess_data.py
      hash: md5
      md5: be338abd544e77b5d385d17dc38c7736
      size: 3113
      isexec: true
    outs:
    - path: data/preprocessed_data/preprocessed_sephora.pkl
      hash: md5
      md5: 1a94ebf512675f56c37d7eb1a3f62ce0
      size: 41644915
  split_data@rt-polarity:
    cmd: python scripts/split_data.py data/preprocessed_data/preprocessed_rt-polarity.pkl
      data/train_test_data rt-polarity
    deps:
    - path: data/preprocessed_data/preprocessed_rt-polarity.pkl
      hash: md5
      md5: dd617f2e0f703af6dc707bc21450cf39
      size: 796517
    - path: scripts/split_data.py
      hash: md5
      md5: f23357232ab13c52b31a87a1257ebb47
      size: 2317
      isexec: true
    params:
      params.yaml:
        split_data.stratify: true
        split_data.test_size: 0.15
      configs/rt-polarity.yaml:
        features.label: label
    outs:
    - path: data/train_test_data/rt-polarity/test.pkl
      hash: md5
      md5: 380b3ff8ee94cbb6a20d0b6194a69d4b
      size: 132622
    - path: data/train_test_data/rt-polarity/train.pkl
      hash: md5
      md5: 0dc18651cce7caea6680b9c234370123
      size: 750192
  split_data@sephora:
    cmd: python scripts/split_data.py data/preprocessed_data/preprocessed_sephora.pkl
      data/train_test_data sephora
    deps:
    - path: data/preprocessed_data/preprocessed_sephora.pkl
      hash: md5
      md5: 1a94ebf512675f56c37d7eb1a3f62ce0
      size: 41644915
    - path: scripts/split_data.py
      hash: md5
      md5: f23357232ab13c52b31a87a1257ebb47
      size: 2317
      isexec: true
    params:
      params.yaml:
        split_data.stratify: true
        split_data.test_size: 0.15
      configs/sephora.yaml:
        features.label: LABEL-rating
    outs:
    - path: data/train_test_data/sephora/test.pkl
      hash: md5
      md5: b8f42ac8dcf33e771a5310ab92ffdb84
      size: 6340843
    - path: data/train_test_data/sephora/train.pkl
      hash: md5
      md5: a1bbdc9c83e5acecb058991a91e4341a
      size: 35422282
  eval_hyperparameters@rt-polarity:
    cmd: "papermill notebooks/eval_hyperparameters.ipynb data/notebooks/rt-polarity/eval_hyperparameters.ipynb
      -p dataset_name rt-polarity\n"
    deps:
    - path: data/train_test_data/rt-polarity/test.pkl
      hash: md5
      md5: 380b3ff8ee94cbb6a20d0b6194a69d4b
      size: 132622
    - path: data/train_test_data/rt-polarity/train.pkl
      hash: md5
      md5: 0dc18651cce7caea6680b9c234370123
      size: 750192
    - path: notebooks/eval_hyperparameters.ipynb
      hash: md5
      md5: d8bdfbd2c32165cf92a8b4eea9e84fe5
      size: 23101
      isexec: true
    params:
      configs/rt-polarity.yaml:
        features.categorical:
        - contains_bad
        features.label: label
        features.numerical:
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        pipeline.dim_red_method: svd
        pipeline.dim_reduction: false
        pipeline.n_components: 145
        pipeline.selected:
        - contains_bad
        - review_length
        - exclamation_count
        - unique_word_count
        - review_text
        - label
    outs:
    - path: data/models/rt-polarity/best_params.json
      hash: md5
      md5: 95fb5c601446e35f15f5c081af8e4ee1
      size: 311
    - path: data/notebooks/rt-polarity/eval_hyperparameters.ipynb
      hash: md5
      md5: 7a087cb469e37727e3fdf0bd723bb348
      size: 213360
  eval_hyperparameters@sephora:
    cmd: "papermill notebooks/eval_hyperparameters.ipynb data/notebooks/sephora/eval_hyperparameters.ipynb
      -p dataset_name sephora\n"
    deps:
    - path: data/train_test_data/sephora/test.pkl
      hash: md5
      md5: b8f42ac8dcf33e771a5310ab92ffdb84
      size: 6340843
    - path: data/train_test_data/sephora/train.pkl
      hash: md5
      md5: a1bbdc9c83e5acecb058991a91e4341a
      size: 35422282
    - path: notebooks/eval_hyperparameters.ipynb
      hash: md5
      md5: d8bdfbd2c32165cf92a8b4eea9e84fe5
      size: 23101
      isexec: true
    params:
      configs/sephora.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.label: LABEL-rating
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        - review_title
        pipeline.dim_red_method: svd
        pipeline.dim_reduction: false
        pipeline.n_components: 145
        pipeline.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
    outs:
    - path: data/models/sephora/best_params.json
      hash: md5
      md5: 4f88b76b13ee4530810010cd968a13b5
      size: 299
    - path: data/notebooks/sephora/eval_hyperparameters.ipynb
      hash: md5
      md5: cd3eee2269bc0244d282d160f349cabb
      size: 211483
  eval_features@rt-polarity:
    cmd: python scripts/eval_features.py data/train_test_data data/metrics/rt-polarity/feature_metrics.json
      rt-polarity
    deps:
    - path: data/train_test_data/rt-polarity/test.pkl
      hash: md5
      md5: 380b3ff8ee94cbb6a20d0b6194a69d4b
      size: 132622
    - path: data/train_test_data/rt-polarity/train.pkl
      hash: md5
      md5: 0dc18651cce7caea6680b9c234370123
      size: 750192
    - path: scripts/eval_features.py
      hash: md5
      md5: a8360c092ec88f3c49634e2cc97fd843
      size: 2583
      isexec: true
    params:
      configs/rt-polarity.yaml:
        features.categorical:
        - contains_bad
        features.highlights:
        features.label: label
        features.numerical:
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        pipeline.dim_red_method: svd
        pipeline.dim_reduction: false
        pipeline.n_components: 145
        pipeline.selected:
        - contains_bad
        - review_length
        - exclamation_count
        - unique_word_count
        - review_text
        - label
    outs:
    - path: data/metrics/rt-polarity/feature_metrics.json
      hash: md5
      md5: 4be012d9661ef0680c76565a200ef074
      size: 768
    - path: data/models/rt-polarity/best_features.json
      hash: md5
      md5: b1470106cb23b1129f9c6ecfd50f72b8
      size: 24
  eval_features@sephora:
    cmd: python scripts/eval_features.py data/train_test_data data/metrics/sephora/feature_metrics.json
      sephora
    deps:
    - path: data/train_test_data/sephora/test.pkl
      hash: md5
      md5: b8f42ac8dcf33e771a5310ab92ffdb84
      size: 6340843
    - path: data/train_test_data/sephora/train.pkl
      hash: md5
      md5: a1bbdc9c83e5acecb058991a91e4341a
      size: 35422282
    - path: scripts/eval_features.py
      hash: md5
      md5: a3f23d5f1eafc7fb350c40bd145a7ec7
      size: 2591
      isexec: true
    params:
      configs/sephora.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.highlights: highlights
        features.label: LABEL-rating
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        - review_title
        pipeline.dim_red_method: svd
        pipeline.dim_reduction: false
        pipeline.n_components: 145
        pipeline.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
    outs:
    - path: data/metrics/sephora/feature_metrics.json
      hash: md5
      md5: 800eebe4bbcae55ffe69121183562501
      size: 734
    - path: data/models/sephora/best_features.json
      hash: md5
      md5: 13356ec67b28ac7815bac1325fe01e78
      size: 25
  eval_vectorization@rt-polarity:
    cmd: python scripts/eval_vectorizations.py data/train_test_data data/metrics/rt-polarity/vec_metrics.json
      rt-polarity
    deps:
    - path: data/train_test_data/rt-polarity/test.pkl
      hash: md5
      md5: 380b3ff8ee94cbb6a20d0b6194a69d4b
      size: 132622
    - path: data/train_test_data/rt-polarity/train.pkl
      hash: md5
      md5: 0dc18651cce7caea6680b9c234370123
      size: 750192
    - path: scripts/eval_vectorizations.py
      hash: md5
      md5: d800350c3775bf81df5f0cf947fe2cc8
      size: 2276
      isexec: true
    params:
      configs/rt-polarity.yaml:
        features.categorical:
        - contains_bad
        features.highlights:
        features.label: label
        features.numerical:
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        pipeline.dim_red_method: svd
        pipeline.dim_reduction: false
        pipeline.n_components: 145
        pipeline.selected:
        - contains_bad
        - review_length
        - exclamation_count
        - unique_word_count
        - review_text
        - label
    outs:
    - path: data/metrics/rt-polarity/vec_metrics.json
      hash: md5
      md5: e65da1e7c12bcaebde910c58d2326637
      size: 276
    - path: data/models/rt-polarity/best_vec_method.json
      hash: md5
      md5: dbc11670edc61ce83823d2f26991fbf8
      size: 31
  eval_vectorization@sephora:
    cmd: python scripts/eval_vectorizations.py data/train_test_data data/metrics/sephora/vec_metrics.json
      sephora
    deps:
    - path: data/train_test_data/sephora/test.pkl
      hash: md5
      md5: b8f42ac8dcf33e771a5310ab92ffdb84
      size: 6340843
    - path: data/train_test_data/sephora/train.pkl
      hash: md5
      md5: a1bbdc9c83e5acecb058991a91e4341a
      size: 35422282
    - path: scripts/eval_vectorizations.py
      hash: md5
      md5: d800350c3775bf81df5f0cf947fe2cc8
      size: 2276
      isexec: true
    params:
      configs/sephora.yaml:
        features.categorical:
        - limited_edition
        - new
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        features.highlights: highlights
        features.label: LABEL-rating
        features.numerical:
        - total_feedback_count
        - helpfulness
        - total_neg_feedback_count
        - total_pos_feedback_count
        - price_usd
        - loves_count
        - rating
        - reviews
        - child_count
        - review_length
        - exclamation_count
        - unique_word_count
        features.text:
        - review_text
        - review_title
        pipeline.dim_red_method: svd
        pipeline.dim_reduction: false
        pipeline.n_components: 145
        pipeline.selected:
        - limited_edition
        - online_only
        - out_of_stock
        - sephora_exclusive
        - contains_refund
        - product_name
        - brand_name
        - primary_category
        - secondary_category
        - helpfulness
        - price_usd
        - loves_count
        - rating
        - reviews
        - review_length
        - exclamation_count
        - review_text
        - review_title
        - highlights
        - LABEL-rating
    outs:
    - path: data/metrics/sephora/vec_metrics.json
      hash: md5
      md5: 9559b6f22a268842a5655619cd09a41c
      size: 264
    - path: data/models/sephora/best_vec_method.json
      hash: md5
      md5: dbc11670edc61ce83823d2f26991fbf8
      size: 31
  test_model@rt-polarity:
    cmd: python scripts/test_model.py data/train_test_data data/metrics/rt-polarity/test_metrics.json
      rt-polarity
    deps:
    - path: data/models/rt-polarity/best_features.json
      hash: md5
      md5: b1470106cb23b1129f9c6ecfd50f72b8
      size: 24
    - path: data/models/rt-polarity/best_params.json
      hash: md5
      md5: 95fb5c601446e35f15f5c081af8e4ee1
      size: 311
    - path: data/models/rt-polarity/best_vec_method.json
      hash: md5
      md5: dbc11670edc61ce83823d2f26991fbf8
      size: 31
    - path: data/train_test_data/rt-polarity/test.pkl
      hash: md5
      md5: 380b3ff8ee94cbb6a20d0b6194a69d4b
      size: 132622
    - path: data/train_test_data/rt-polarity/train.pkl
      hash: md5
      md5: 0dc18651cce7caea6680b9c234370123
      size: 750192
    - path: scripts/test_model.py
      hash: md5
      md5: 773c50b4cb3376d9e104448361f3a2a9
      size: 5449
      isexec: true
    outs:
    - path: data/metrics/rt-polarity/test_metrics.json
      hash: md5
      md5: fdaaafb23b71c5e7b662c571f1766094
      size: 575
    - path: data/models/rt-polarity/dummy_final_pipeline.pkl
      hash: md5
      md5: 2117ed32bb1a588873ca5ce30cfc61d5
      size: 9337
    - path: data/models/rt-polarity/random_forest_final_pipeline.pkl
      hash: md5
      md5: a9eafc0b649f52d04606ecc79f968595
      size: 4527042
    - path: data/models/rt-polarity/svm_final_pipeline.pkl
      hash: md5
      md5: 142c5282d3e19e4c8cf88c97bb331fef
      size: 795341
  test_model@sephora:
    cmd: python scripts/test_model.py data/train_test_data data/metrics/sephora/test_metrics.json
      sephora
    deps:
    - path: data/models/sephora/best_features.json
      hash: md5
      md5: 13356ec67b28ac7815bac1325fe01e78
      size: 25
    - path: data/models/sephora/best_params.json
      hash: md5
      md5: 4f88b76b13ee4530810010cd968a13b5
      size: 299
    - path: data/models/sephora/best_vec_method.json
      hash: md5
      md5: dbc11670edc61ce83823d2f26991fbf8
      size: 31
    - path: data/train_test_data/sephora/test.pkl
      hash: md5
      md5: b8f42ac8dcf33e771a5310ab92ffdb84
      size: 6340843
    - path: data/train_test_data/sephora/train.pkl
      hash: md5
      md5: a1bbdc9c83e5acecb058991a91e4341a
      size: 35422282
    - path: scripts/test_model.py
      hash: md5
      md5: 773c50b4cb3376d9e104448361f3a2a9
      size: 5449
      isexec: true
    outs:
    - path: data/metrics/sephora/test_metrics.json
      hash: md5
      md5: b8875c0251685ccad564563269434878
      size: 569
    - path: data/models/sephora/dummy_final_pipeline.pkl
      hash: md5
      md5: b54e537ad18f80c01edd108a592bf2df
      size: 14049
    - path: data/models/sephora/random_forest_final_pipeline.pkl
      hash: md5
      md5: 92290732ada198c3c963216c03774967
      size: 10101002
    - path: data/models/sephora/svm_final_pipeline.pkl
      hash: md5
      md5: 956a45372dd40d93ae8392231600977b
      size: 1218049
  summarize_results:
    cmd: python scripts/summarize_results.py data/metrics data/models results/test_results.md
    deps:
    - path: data/metrics
      hash: md5
      md5: e799103ff45175a8b62cf904ff6f6027.dir
      size: 3186
      nfiles: 8
    - path: data/models
      hash: md5
      md5: f77d053b4f6db5322d8b03ea3eaf83fd.dir
      size: 16665541
      nfiles: 14
    - path: scripts/summarize_results.py
      hash: md5
      md5: 2876b6d39406f1d622fd8d6f1bcc542b
      size: 3012
      isexec: true
    outs:
    - path: results/test_results.md
      hash: md5
      md5: 2114067df3a5cd9fd76c13325f6f78be
      size: 647
