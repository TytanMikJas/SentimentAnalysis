schema: '2.0'
stages:
  process_data:
    cmd: python scripts/process_data.py data/raw_data data/processed_data/dataset.pkl
    deps:
    - path: data/raw_data
      hash: md5
      md5: 1879a37ccfe89870a8e73238e331f4ac.dir
      size: 524018363
      nfiles: 6
    - path: scripts/process_data.py
      hash: md5
      md5: 68cfc96e81d1bb01f548b096af85b463
      size: 1509
      isexec: true
    params:
      params.yaml:
        process_data.cols_to_delete:
        - product_id
        - brand_id
        - variation_type
        - variation_value
        - variation_desc
        - author_id
        - submission_time
        - skin_tone
        - eye_color
        - skin_type
        - hair_color
        - product_id
        process_data.review_text_column: review_text
    outs:
    - path: data/processed_data/dataset.pkl
      hash: md5
      md5: a2d78199c72541fdf41b0c08d7766b4e
      size: 618840922
  split_data:
    cmd: python scripts/split_data.py data/processed_data/dataset.pkl data/train_test_data
      params.yaml
    deps:
    - path: data/processed_data/dataset.pkl
      hash: md5
      md5: a2d78199c72541fdf41b0c08d7766b4e
      size: 618840922
    - path: scripts/split_data.py
      hash: md5
      md5: c735dfadc84760d669341093a005b71d
      size: 1179
      isexec: true
    params:
      params.yaml:
        split_data.label_column: LABEL-rating
        split_data.stratify: true
        split_data.test_size: 0.2
    outs:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: a8365979fe91acb6a2f9a6355692f45c
      size: 127534938
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: 6718728d14f1ab5f6c52ecb58ee5d89b
      size: 502730183
  eval_model:
    cmd: python scripts/eval_model.py data/train_test_data params.yaml metrics.json
    deps:
    - path: data/train_test_data/test.pkl
      hash: md5
      md5: a8365979fe91acb6a2f9a6355692f45c
      size: 127534938
    - path: data/train_test_data/train.pkl
      hash: md5
      md5: 6718728d14f1ab5f6c52ecb58ee5d89b
      size: 502730183
    - path: scripts/eval_model.py
      hash: md5
      md5: aedb322ee5a6ea14e4b7c8a5babb88b9
      size: 1039
      isexec: true
    params:
      params.yaml:
        model.strategy: uniform
    outs:
    - path: metrics.json
      hash: md5
      md5: b1ca41a7491603abe9385c59775daef8
      size: 34
